<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Roc Playground</title>
        <link rel="icon" href="./assets/favicon.svg" type="image/svg+xml" />
    </head>
    <body>
        <div class="header">
            <svg
                id="roc-logo-top-left"
                viewBox="0 0 52 53"
                xmlns="http://www.w3.org/2000/svg"
                style="display: flex; height: 30px"
                aria-label="Roc Logo"
            >
                <!-- Make this icon look nicer in dark mode. (Only Firefox supports this; others ignore it.) -->
                <style>
                    @media (prefers-color-scheme: dark) {
                        polygon {
                            fill: #8450ff; /* matches var(--state-active) in dark mode */
                        }
                    }
                </style>
                <polygon
                    fill="rgba(124, 58, 237, 0.9)"
                    points="0,0 23.8834,3.21052 37.2438,19.0101 45.9665,16.6324 50.5,22 45,22 44.0315,26.3689 26.4673,39.3424 27.4527,45.2132 17.655,53 23.6751,22.7086"
                />
            </svg>
            <div class="header-status">
                <div class="mode-toggle">
                    <button class="mode-button active" id="editorModeBtn">
                        EDITOR
                    </button>
                    <button class="mode-button" id="replModeBtn">
                        REPL
                    </button>
                </div>
                <div class="theme-toggle">
                    <button 
                        class="theme-button" 
                        id="themeSwitch"
                        type="button"
                    >
                        Use Dark Mode
                    </button>
                </div>
            </div>
        </div>

        <!-- Editor Mode Container -->
        <div class="main-container" id="editorContainer" style="display: none">
            <div class="examples-sidebar">
                <div class="examples-header">EXAMPLES</div>
                <div class="examples-list" id="examplesList">
                    <!-- Examples will be populated by JavaScript -->
                </div>
            </div>
            <div class="editor-container">
                <div class="editor-header">
                    <div class="compile-time" id="compileTime"></div>
                    <div class="diagnostic-summary" id="diagnosticSummary"></div>
                    <div class="header-buttons-container" id="headerButtonsContainer"></div>
                </div>
                <div class="editor" id="editor"></div>
            </div>

            <div class="resize-handle" id="resizeHandle"></div>

            <div class="output-container">
                <div class="output-header">
                    <div class="stage-tabs-container">
                        <button class="stage-scroll-btn stage-scroll-left" id="scrollLeftBtn" aria-label="Scroll tabs left">
                            <svg width="18" height="18"
                                viewBox="0 0 18 18"
                                xmlns="http://www.w3.org/2000/svg"
                                aria-hidden="true"
                                focusable="false"
                                style="vertical-align: middle;">
                                    <polygon points="12,3 6,9 12,15" fill="currentColor"/>
                            </svg>
                        </button>
                        <div class="stage-tabs" role="tablist" id="stageTabs">
                            <button
                                class="stage-button"
                                role="tab"
                                aria-selected="true"
                                aria-controls="problems-panel"
                                id="diagnosticsBtn"
                                tabindex="0"
                            >
                                PROBLEMS
                            </button>
                            <button
                                class="stage-button"
                                role="tab"
                                aria-selected="false"
                                aria-controls="tokens-panel"
                                id="tokensBtn"
                                tabindex="-1"
                            >
                                TOKENS
                            </button>
                            <button
                                class="stage-button"
                                role="tab"
                                aria-selected="false"
                                aria-controls="ast-panel"
                                id="parseBtn"
                                tabindex="-1"
                            >
                                AST
                            </button>
                            <button
                                class="stage-button"
                                role="tab"
                                aria-selected="false"
                                aria-controls="cir-panel"
                                id="canBtn"
                                tabindex="-1"
                            >
                                CIR
                            </button>
                            <button
                                class="stage-button"
                                role="tab"
                                aria-selected="false"
                                aria-controls="types-panel"
                                id="typesBtn"
                                tabindex="-1"
                            >
                                TYPES
                            </button>
                            <button
                                class="stage-button"
                                role="tab"
                                aria-selected="false"
                                aria-controls="formatted-panel"
                                id="formattedBtn"
                                tabindex="-1"
                            >
                                FORMATTED
                            </button>
                            <button
                                class="stage-button"
                                role="tab"
                                aria-selected="false"
                                aria-controls="tests-panel"
                                id="testsBtn"
                                tabindex="-1"
                            >
                                TESTS
                            </button>
                        </div>
                        <button class="stage-scroll-btn stage-scroll-right" id="scrollRightBtn" aria-label="Scroll tabs right">
                            <svg width="18" height="18"
                                viewBox="0 0 18 18"
                                xmlns="http://www.w3.org/2000/svg"
                                aria-hidden="true"
                                focusable="false"
                                style="vertical-align: middle;">
                                    <polygon points="6,3 12,9 6,15" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="output-content" role="tabpanel" id="outputContent" aria-labelledby="diagnosticsBtn">
                    <div class="loading">Initializing WASM module...</div>
                </div>
            </div>
        </div>

        <!-- REPL Mode Container -->
        <div class="repl-container" id="replContainer" style="display: flex">
            <div id="repl" role="presentation">
                <code class="history">
                    <div id="repl-intro-text">
                        Enter an expression in the input below to evaluate, or a definition (like
                        <span class="color-blue">x = 1</span>) to use later.
                    </div>
                    <div id="history-text" aria-live="polite"></div>
                </code>
                <div id="repl-prompt" role="presentation">Â»</div>
                <textarea
                    aria-label="Input Roc code here, then press Enter to submit it to the REPL"
                    id="source-input"
                    placeholder="Enter some Roc code here."
                    spellcheck="false"
                    style="height: 57px"
                ></textarea>
            </div>
        </div>


        <!-- Load playground entry point -->
        <script type="module" src="index.ts"></script>
    </body>
</html>
